<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Chat & Social Platform</title>
  <!-- C√°c script c·∫ßn thi·∫øt (Firebase, PubNub, anime.js, AgoraRTC, ‚Ä¶) -->
  <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-database-compat.js"></script>
  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.29.11.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://download.agora.io/sdk/release/AgoraRTC_N.js"></script>
  <!-- Facebook Comments Plugin SDK -->
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0"></script>
  <style>
    /* Reset & CSS Variables cho theming */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --background-color: #ffffff;
      --text-color: #000000;
      --primary-color: #6200ea;
      --secondary-color: #03dac6;
    }
    .dark-theme {
      --background-color: #121212;
      --text-color: #ffffff;
    }
    body {
      background: var(--background-color);
      color: var(--text-color);
      font-family: Arial, sans-serif;
    }
    header {
      background: var(--primary-color);
      color: var(--text-color);
      padding: 1em;
      text-align: center;
    }
    header > div {
      margin-top: 10px;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: var(--secondary-color);
    }
    nav a {
      padding: 10px 20px;
      color: var(--text-color);
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    nav a.active {
      background: var(--primary-color);
    }
    .page { display: none; padding: 10px; }
    .active-page { display: block; }
    .fadeIn { animation: fadeInAnimation 0.5s; }
    @keyframes fadeInAnimation { from { opacity: 0; } to { opacity: 1; } }
    /* Chat styles */
    #chat-container {
      border: 1px solid #ccc;
      height: 400px;
      overflow-y: scroll;
      padding: 10px;
      background: var(--background-color);
    }
    .chat-message {
      margin: 5px 0;
      padding: 5px;
      border-radius: 10px;
      max-width: 70%;
      word-break: break-word;
    }
    .chat-message.self { background: var(--secondary-color); margin-left: auto; }
    .chat-message.other { background: #e0e0e0; }
    /* Emoji picker */
    #emojiPicker {
      display: none;
      position: absolute;
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      z-index: 1000;
    }
    #emojiPicker span.emoji { cursor: pointer; font-size: 1.2em; margin: 5px; }
    /* Social Network styles */
    .post {
      border: 1px solid #aaa;
      border-radius: 5px;
      padding: 10px;
      margin-bottom: 10px;
      background: var(--background-color);
      color: var(--text-color);
      position: relative;
    }
    .post button { position: absolute; right: 10px; top: 10px; }
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background: rgba(0,0,0,0.4);
    }
    .modal-content {
      background: var(--background-color);
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      color: var(--text-color);
    }
    /* Profile styles */
    #profileInfo img { border-radius: 5px; margin: 5px; }
    /* C√°c class cho c√†i ƒë·∫∑t, games, calls ‚Ä¶ */
  </style>
</head>
<body>
  <header>
    <h1>Advanced Chat & Social Platform</h1>
    <div>
      <button id="themeToggle">Toggle Theme</button>
      <select id="languageSelect">
        <option value="en">English</option>
        <option value="vi">Ti·∫øng Vi·ªát</option>
        <!-- Th√™m c√°c ng√¥n ng·ªØ kh√°c -->
      </select>
      <button id="loginBtn">Login</button>
      <button id="signupBtn">Sign Up</button>
    </div>
  </header>
  <nav>
    <a data-page="chat" class="active">Chat</a>
    <a data-page="social">Social Network</a>
    <a data-page="settings">Settings</a>
    <a data-page="games">Games</a>
    <a data-page="profile">Profile</a>
    <a data-page="calls">Calls</a>
  </nav>
  
  <!-- Trang Chat: bao g·ªìm khu v·ª±c chat, input & emoji picker -->
  <div id="chat" class="page active-page fadeIn">
    <div id="chat-container"></div>
    <div style="position: relative;">
      <input type="text" id="chatMessageInput" placeholder="Type a message..." style="width:70%;">
      <button id="emojiBtn">üòä</button>
      <button id="sendChatBtn">Send</button>
      <div id="emojiPicker">
        <span class="emoji">üòÄ</span>
        <span class="emoji">üòÅ</span>
        <span class="emoji">üòÇ</span>
        <span class="emoji">ü§£</span>
        <span class="emoji">üòé</span>
        <!-- Th√™m emoji kh√°c n·∫øu c·∫ßn -->
      </div>
    </div>
    <!-- N√∫t chuy·ªÉn sang k√™nh chat th·∫ø gi·ªõi -->
    <button id="worldChatBtn">World Chat Channel</button>
  </div>
  
  <!-- Trang M·∫°ng X√£ H·ªôi -->
  <div id="social" class="page fadeIn">
    <h2>Social Feed</h2>
    <div id="social-posts"></div>
    <textarea id="postContent" placeholder="Write a post..."></textarea>
    <button id="createPostBtn">Post</button>
    <!-- Ch·ª©c nƒÉng k·∫øt b·∫°n -->
    <div>
      <h3>Friend Suggestions</h3>
      <div id="friendSuggestions"></div>
      <h3>Search Friends</h3>
      <input type="text" id="friendSearchInput" placeholder="Search by nickname, email, phone">
      <button id="friendSearchBtn">Search</button>
      <div id="searchResults"></div>
    </div>
  </div>
  
  <!-- Trang C√†i ƒê·∫∑t -->
  <div id="settings" class="page fadeIn">
    <h2>Settings</h2>
    <div class="settings-section">
      <label>Profile Visibility: </label>
      <select id="profileVisibility">
          <option value="public">Public</option>
          <option value="friends">Friends Only</option>
          <option value="private">Private</option>
      </select>
    </div>
    <div class="settings-section">
      <label>Display User Info (email, phone, nickname):</label>
      <input type="checkbox" id="displayUserInfo" checked>
    </div>
    <div class="settings-section">
      <h3>Advanced Appearance</h3>
      <input type="color" id="themeColorPicker">
    </div>
    <div class="settings-section">
      <h3>GeoGebra Integration</h3>
      <div id="geogebraContainer" style="width:600px; height:400px; border: 1px solid #ccc;">
        <!-- GeoGebra applet ƒë∆∞·ª£c inject v√†o ƒë√¢y -->
      </div>
    </div>
  </div>
  
  <!-- Trang Games -->
  <div id="games" class="page fadeIn">
    <h2>Games</h2>
    <div id="gameList">
      <ul>
         <li><button class="gameBtn" data-game-id="game1">Game 1</button></li>
         <li><button class="gameBtn" data-game-id="game2">Game 2</button></li>
         <li><button class="gameBtn" data-game-id="game3">Game 3</button></li>
         <!-- Ti·∫øp t·ª•c li·ªát k√™ ƒë·∫øn √≠t nh·∫•t 30 game -->
      </ul>
    </div>
    <div id="gameContainer">
      <!-- Khu v·ª±c ch∆°i game t√≠ch h·ª£p (iframe ho·∫∑c canvas) -->
    </div>
  </div>
  
  <!-- Trang Profile -->
  <div id="profile" class="page fadeIn">
    <h2>User Profile</h2>
    <div id="profileInfo">
      <img id="profilePicture" src="default_avatar.png" alt="Avatar" style="width:100px;height:100px;">
      <img id="coverPicture" src="default_cover.jpg" alt="Cover Image" style="width:300px;height:100px;">
      <p id="nicknameDisplay">Nickname: Guest</p>
      <div>
        <label>Change Avatar: <input type="file" id="avatarUpload"></label>
        <label>Change Cover: <input type="file" id="coverUpload"></label>
      </div>
      <!-- T√≠ch h·ª£p li√™n k·∫øt nh·∫°c -->
      <div>
        <label>Music Link: <input type="text" id="musicLink" placeholder="Paste music URL"></label>
        <button id="playMusicBtn">Play Music</button>
      </div>
      <!-- Ch·ªânh m√†u profile -->
      <div>
        <label>Profile Color: <input type="color" id="profileColorPicker"></label>
      </div>
    </div>
    <!-- Plugin b√¨nh lu·∫≠n Facebook -->
    <div id="fb-comments" class="fb-comments" data-href="https://yourdomain.com/profile" data-width="" data-numposts="5"></div>
  </div>
  
  <!-- Trang Calls: G·ªçi ƒëi·ªán & Video call -->
  <div id="calls" class="page fadeIn">
    <h2>Calls & Video Chats</h2>
    <button id="startVoiceCallBtn">Start Voice Call</button>
    <button id="startVideoCallBtn">Start Video Call</button>
    <div id="callContainer">
      <!-- Giao di·ªán cu·ªôc g·ªçi (video feeds, audio control, etc.) -->
    </div>
  </div>
  
  <!-- Modal Login -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span id="closeLogin" style="float:right;cursor:pointer;">&times;</span>
      <h2>Login</h2>
      <input type="text" id="loginNickname" placeholder="Nickname">
      <input type="email" id="loginEmail" placeholder="Email">
      <input type="password" id="loginPassword" placeholder="Password">
      <button id="loginSubmitBtn">Login</button>
      <button id="googleLoginBtn">Login with Google</button>
      <button id="phoneLoginBtn">Login with Phone</button>
    </div>
  </div>
  
  <!-- Modal Signup -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span id="closeSignup" style="float:right;cursor:pointer;">&times;</span>
      <h2>Sign Up</h2>
      <input type="text" id="signupNickname" placeholder="Nickname">
      <input type="email" id="signupEmail" placeholder="Email">
      <input type="password" id="signupPassword" placeholder="Password">
      <input type="text" id="signupPhone" placeholder="Phone Number">
      <button id="signupSubmitBtn">Sign Up</button>
    </div>
  </div>
  
  <!-- Script t√≠ch h·ª£p to√†n b·ªô c√°c ch·ª©c nƒÉng -->
  <script>
    /* -------------------- Kh·ªüi t·∫°o Firebase -------------------- */
    var firebaseConfig = {
      apiKey: "YOUR_FIREBASE_API_KEY",
      authDomain: "YOUR_APP.firebaseapp.com",
      databaseURL: "https://YOUR_APP.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();
    var auth = firebase.auth();
    
    /* -------------------- Kh·ªüi t·∫°o PubNub (Realtime Chat) -------------------- */
    var pubnub = new PubNub({
      publishKey: "YOUR_PUBNUB_PUBLISH_KEY",
      subscribeKey: "YOUR_PUBNUB_SUBSCRIBE_KEY"
    });
    
    /* -------------------- Kh·ªüi t·∫°o Agora.io cho g·ªçi ƒëi·ªán/video -------------------- */
    var agoraClient = AgoraRTC.createClient({ mode: "rtc", codec: "vp8" });
    var agoraAppId = "YOUR_AGORA_APP_ID";
    
    /* -------------------- Theme & Internationalization -------------------- */
    document.getElementById("themeToggle").addEventListener("click", function() {
      document.body.classList.toggle("dark-theme");
    });
    var translations = {
      en: { welcome: "Welcome", chat: "Chat", social: "Social Feed" },
      vi: { welcome: "Ch√†o m·ª´ng", chat: "Tr√≤ chuy·ªán", social: "M·∫°ng x√£ h·ªôi" }
    };
    document.getElementById("languageSelect").addEventListener("change", function() {
      var lang = this.value;
      document.querySelector("header h1").textContent = translations[lang].welcome;
      // C·∫≠p nh·∫≠t th√™m text theo ng√¥n ng·ªØ cho c√°c th√†nh ph·∫ßn kh√°c n·∫øu c·∫ßn
    });
    
    /* -------------------- Navigation & Page Switching -------------------- */
    document.querySelectorAll("nav a").forEach(function(navLink) {
      navLink.addEventListener("click", function() {
        document.querySelectorAll("nav a").forEach(link => link.classList.remove("active"));
        document.querySelectorAll(".page").forEach(page => page.classList.remove("active-page"));
        navLink.classList.add("active");
        document.getElementById(navLink.getAttribute("data-page")).classList.add("active-page");
      });
    });
    
    /* -------------------- Chat Functionality -------------------- */
    var currentUser = null; // S·∫Ω ƒë∆∞·ª£c thi·∫øt l·∫≠p sau khi ƒëƒÉng nh·∫≠p
    
    function sendChatMessage(message) {
      var msgData = {
        sender: currentUser ? currentUser.nickname : "Guest",
        message: message,
        timestamp: Date.now()
      };
      pubnub.publish({ channel: "globalChat", message: msgData });
      // L∆∞u v√†o Firebase ƒë·ªÉ ƒë·∫£m b·∫£o d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ
      database.ref("chats/globalChat").push(msgData);
    }
    
    document.getElementById("sendChatBtn").addEventListener("click", function() {
      var messageInput = document.getElementById("chatMessageInput");
      var message = messageInput.value;
      if(message.trim() !== "") {
        sendChatMessage(message);
        messageInput.value = "";
      }
    });
    
    // L·∫Øng nghe tin nh·∫Øn t·ª´ PubNub
    pubnub.subscribe({ channels: ["globalChat"] });
    pubnub.addListener({
      message: function(event) {
        displayChatMessage(event.message);
      }
    });
    
    function displayChatMessage(data) {
      var chatContainer = document.getElementById("chat-container");
      var msgDiv = document.createElement("div");
      msgDiv.className = "chat-message " +
        (data.sender === (currentUser ? currentUser.nickname : "Guest") ? "self" : "other");
      msgDiv.textContent = data.sender + ": " + data.message;
      chatContainer.appendChild(msgDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    /* -------------------- Emoji Picker -------------------- */
    var emojiBtn = document.getElementById("emojiBtn");
    var emojiPicker = document.getElementById("emojiPicker");
    emojiBtn.addEventListener("click", function(e) {
      emojiPicker.style.display = emojiPicker.style.display === "none" ? "block" : "none";
      // ƒê·∫∑t v·ªã tr√≠ c·ªßa picker ngay d∆∞·ªõi n√∫t
      var rect = emojiBtn.getBoundingClientRect();
      emojiPicker.style.top = (rect.bottom + window.scrollY) + "px";
      emojiPicker.style.left = (rect.left + window.scrollX) + "px";
    });
    document.querySelectorAll("#emojiPicker span.emoji").forEach(function(emojiSpan) {
      emojiSpan.addEventListener("click", function() {
        document.getElementById("chatMessageInput").value += emojiSpan.textContent;
        emojiPicker.style.display = "none";
      });
    });
    
    /* -------------------- Social Post & Friend Features -------------------- */
    document.getElementById("createPostBtn").addEventListener("click", function() {
      var content = document.getElementById("postContent").value;
      if(content.trim() !== "") {
        var postData = {
          author: currentUser ? currentUser.nickname : "Guest",
          content: content,
          timestamp: Date.now(),
          visibility: "public"
        };
        database.ref("posts").push(postData);
        document.getElementById("postContent").value = "";
        displayPost(postData);
      }
    });
    
    function displayPost(postData) {
      var postDiv = document.createElement("div");
      postDiv.className = "post";
      postDiv.innerHTML = "<strong>" + postData.author + "</strong><p>" + postData.content + "</p>";
      var reportBtn = document.createElement("button");
      reportBtn.textContent = "Report";
      reportBtn.addEventListener("click", function() {
        reportUser(postData.author);
      });
      postDiv.appendChild(reportBtn);
      document.getElementById("social-posts").appendChild(postDiv);
    }
    
    // H√†m b√°o c√°o ng∆∞·ªùi d√πng (v·ªõi ng∆∞·ª°ng b√°o c√°o ƒë·ªÉ ƒë∆∞a ra quy·∫øt ƒë·ªãnh)
    function reportUser(userNickname) {
      var reportRef = database.ref("reports/" + userNickname);
      reportRef.transaction(function(currentCount) {
        return (currentCount || 0) + 1;
      }, function(error, committed, snapshot) {
        if(committed && snapshot.val() >= 10) {
          alert(userNickname + " ƒë√£ b·ªã b√°o c√°o qu√° nhi·ªÅu v√† c√≥ nguy c∆° b·ªã kh√≥a.");
        }
      });
    }
    
    // Ch·ª©c nƒÉng g·ª£i √Ω v√† t√¨m ki·∫øm b·∫°n b√® (stub demo)
    function loadFriendSuggestions() {
      var suggestions = ["Alice", "Bob", "Charlie", "Dave"];
      var container = document.getElementById("friendSuggestions");
      container.innerHTML = "";
      suggestions.forEach(function(name) {
        var btn = document.createElement("button");
        btn.textContent = "Add " + name;
        btn.addEventListener("click", function() {
          alert("ƒê√£ g·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n t·ªõi " + name);
        });
        container.appendChild(btn);
      });
    }
    loadFriendSuggestions();
    
    document.getElementById("friendSearchBtn").addEventListener("click", function() {
      var query = document.getElementById("friendSearchInput").value;
      var results = ["Result1", "Result2"]; // Thay th·∫ø b·∫±ng truy v·∫•n Firebase
      document.getElementById("searchResults").innerHTML = results.join(", ");
    });
    
    /* -------------------- Upload ·∫£nh qua Cloudinary -------------------- */
    function uploadFile(file, callback) {
      var url = "https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/upload";
      var xhr = new XMLHttpRequest();
      var fd = new FormData();
      fd.append("upload_preset", "YOUR_UNSIGNED_UPLOAD_PRESET");
      fd.append("file", file);
      xhr.open("POST", url, true);
      xhr.onreadystatechange = function() {
        if(xhr.readyState === 4 && xhr.status === 200) {
          var response = JSON.parse(xhr.responseText);
          callback(response.secure_url);
        }
      };
      xhr.send(fd);
    }
    
    document.getElementById("avatarUpload").addEventListener("change", function(e) {
      var file = e.target.files[0];
      if(file) {
        uploadFile(file, function(url) {
          document.getElementById("profilePicture").src = url;
          if(currentUser) {
            database.ref("users/" + currentUser.uid).update({ avatar: url });
          }
        });
      }
    });
    
    document.getElementById("coverUpload").addEventListener("change", function(e) {
      var file = e.target.files[0];
      if(file) {
        uploadFile(file, function(url) {
          document.getElementById("coverPicture").src = url;
          if(currentUser) {
            database.ref("users/" + currentUser.uid).update({ cover: url });
          }
        });
      }
    });
    
    /* -------------------- T√≠ch h·ª£p nghe nh·∫°c (Audiomack source) -------------------- */
    document.getElementById("playMusicBtn").addEventListener("click", function() {
      var musicUrl = document.getElementById("musicLink").value;
      if(musicUrl.trim() !== "") {
        var audio = document.createElement("audio");
        audio.src = musicUrl;
        audio.controls = true;
        audio.autoplay = true;
        document.getElementById("profileInfo").appendChild(audio);
      }
    });
    
    /* -------------------- Modal: Login & Signup -------------------- */
    var loginModal = document.getElementById("loginModal");
    var signupModal = document.getElementById("signupModal");
    document.getElementById("loginBtn").addEventListener("click", function() {
      loginModal.style.display = "block";
    });
    document.getElementById("closeLogin").addEventListener("click", function() {
      loginModal.style.display = "none";
    });
    document.getElementById("signupBtn").addEventListener("click", function() {
      signupModal.style.display = "block";
    });
    document.getElementById("closeSignup").addEventListener("click", function() {
      signupModal.style.display = "none";
    });
    
    /* -------------------- Firebase Authentication -------------------- */
    document.getElementById("loginSubmitBtn").addEventListener("click", function() {
      var email = document.getElementById("loginEmail").value;
      var password = document.getElementById("loginPassword").value;
      auth.signInWithEmailAndPassword(email, password)
        .then(function(userCredential) {
          currentUser = userCredential.user;
          alert("Login successful!");
          loginModal.style.display = "none";
        }).catch(function(error) {
          alert("Login failed: " + error.message);
        });
    });
    
    document.getElementById("signupSubmitBtn").addEventListener("click", function() {
      var email = document.getElementById("signupEmail").value;
      var password = document.getElementById("signupPassword").value;
      var nickname = document.getElementById("signupNickname").value;
      auth.createUserWithEmailAndPassword(email, password)
        .then(function(userCredential) {
          currentUser = userCredential.user;
          database.ref("users/" + currentUser.uid).set({
            nickname: nickname,
            email: email,
            phone: document.getElementById("signupPhone").value,
            avatar: "default_avatar.png",
            cover: "default_cover.jpg",
            theme: "default"
          });
          alert("Signup successful!");
          signupModal.style.display = "none";
        }).catch(function(error) {
          alert("Signup failed: " + error.message);
        });
    });
    
    // Stub cho Google & Phone login (ƒëi·ªÅn th√™m n·∫øu c·∫ßn)
    document.getElementById("googleLoginBtn").addEventListener("click", function() {
      alert("Google login feature stub - implement as needed.");
    });
    document.getElementById("phoneLoginBtn").addEventListener("click", function() {
      alert("Phone login feature stub - implement as needed.");
    });
    
    /* -------------------- Agora.io: G·ªçi Voice & Video -------------------- */
    document.getElementById("startVoiceCallBtn").addEventListener("click", function() {
      agoraClient.init(agoraAppId, function() {
        agoraClient.join(null, "VOICE_CHANNEL", null, function(uid) {
          console.log("Voice call joined with UID:", uid);
          // T·∫°o track audio v√† hi·ªÉn th·ªã giao di·ªán g·ªçi
        });
      });
    });
    
    document.getElementById("startVideoCallBtn").addEventListener("click", function() {
      agoraClient.init(agoraAppId, function() {
        agoraClient.join(null, "VIDEO_CHANNEL", null, function(uid) {
          console.log("Video call joined with UID:", uid);
          // T·∫°o track video v√† hi·ªÉn th·ªã giao di·ªán g·ªçi
        });
      });
    });
    
    /* -------------------- Keyboard Shortcuts & Anti Screen Lock -------------------- */
    document.addEventListener("keydown", function(e) {
      if(e.ctrlKey && e.key === "Enter") {
        document.getElementById("sendChatBtn").click();
      }
    });
    setInterval(function() {
      window.dispatchEvent(new Event("mousemove"));
    }, 100); // m·ªói ph√∫t
    
    /* -------------------- Load d·ªØ li·ªáu t·ª´ Firebase -------------------- */
    database.ref("chats/globalChat").on("child_added", function(snapshot) {
      displayChatMessage(snapshot.val());
    });
    database.ref("posts").on("child_added", function(snapshot) {
      displayPost(snapshot.val());
    });
    
    /* -------------------- Obfuscation Code (ƒë√°nh l·∫°c h∆∞·ªõng sao ch√©p) -------------------- */
    (function(){
      var dummy = [1,2,3,4];
      dummy.forEach(function(i){ console.log("Protected code block " + i); });
    })();
    
    /* -------------------- Notifications -------------------- */
    function showNotification(message) {
      if (Notification.permission === "granted") {
        new Notification("Platform Notification", { body: message });
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(function(permission) {
          if (permission === "granted") {
            new Notification("Platform Notification", { body: message });
          }
        });
      }
    }
    pubnub.addListener({
      message: function(event) {
        showNotification(event.message.sender + " sent a message");
      }
    });
    
    /* -------------------- GeoGebra Integration -------------------- */
    (function loadGeoGebra(){
      var script = document.createElement("script");
      script.src = "https://www.geogebra.org/apps/deployggb.js";
      script.onload = function() {
        var app = new GGBApplet({ "appName": "geometry", "showToolBar": true, "showMenuBar": true }, true);
        app.inject('geogebraContainer');
      };
      document.head.appendChild(script);
    })();
    
    /* -------------------- Load Danh B·∫° & Friend List (Stub) -------------------- */
    function loadFriends() {
      console.log("Loading friends...");
      // Th·ª±c thi truy v·∫•n Firebase v√† hi·ªÉn th·ªã danh s√°ch!
    }
    loadFriends();
    
    /* -------------------- Online / Offline Status -------------------- */
    window.addEventListener("online", function() {
      console.log("You are online");
    });
    window.addEventListener("offline", function() {
      console.log("You are offline");
    });
    
    // C√°c t√≠nh nƒÉng b·ªï sung kh√°c (v√≠ d·ª•: danh b·∫° chat ri√™ng, plugin comment c·ªßa Facebook, t·ªëi ∆∞u hi·ªáu ·ª©ng v·ªõi anime.js, ‚Ä¶)
    // Vui l√≤ng m·ªü r·ªông th√™m theo y√™u c·∫ßu s·∫£n ph·∫©m ho√†n ch·ªânh.
    
  </script>
</body>
</html>
