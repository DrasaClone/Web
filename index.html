<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nền Tảng Trò Chuyện và Mạng Xã Hội</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://sdk.cloudinary.com/js/cloudinary-jquery-file-upload.js"></script>
    <script src="https://cdn.agora.io/sdk/web/AgoraRTC_N-4.7.3.js"></script>
</head>
<body>
    <div id="app">
        <div v-if="!user">
            <h1>Đăng Nhập</h1>
            <input v-model="email" placeholder="Email">
            <input v-model="password" type="password" placeholder="Mật khẩu">
            <button @click="login">Đăng Nhập</button>
            <button @click="register">Đăng Ký</button>
        </div>
        <div v-else>
            <h1>Xin chào, {{ user.displayName }}</h1>
            <button @click="logout">Đăng Xuất</button>
            <div>
                <h2>Trò Chuyện</h2>
                <div id="chat-box"></div>
                <input v-model="message" @keyup.enter="sendMessage">
            </div>
            <div>
                <h2>Bài Đăng</h2>
                <textarea v-model="postContent"></textarea>
                <button @click="createPost">Đăng</button>
            </div>
            <div>
                <h2>Chủ Đề</h2>
                <select v-model="selectedTheme" @change="setTheme">
                    <option v-for="theme in themes" :value="theme">{{ theme }}</option>
                </select>
            </div>
        </div>
    </div>
    <script src="scripts/config.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/chat.js"></script>
    <script src="scripts/social.js"></script>
    <script src="scripts/themes.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                user: null,
                email: '',
                password: '',
                message: '',
                postContent: '',
                selectedTheme: 'default',
                themes: ['default', 'dark', 'light', /* thêm 17 chủ đề khác */]
            },
            methods: {
                login() {
                    loginUser(this.email, this.password).then(user => {
                        this.user = user;
                    });
                },
                register() {
                    registerUser(this.email, this.password).then(user => {
                        this.user = user;
                    });
                },
                logout() {
                    logoutUser().then(() => {
                        this.user = null;
                    });
                },
                sendMessage() {
                    sendMessage(this.message);
                    this.message = '';
                },
                createPost() {
                    createPost(this.postContent);
                    this.postContent = '';
                },
                setTheme() {
                    setTheme(this.selectedTheme);
                }
            },
            created() {
                firebase.auth().onAuthStateChanged(user => {
                    this.user = user;
                });
            }
        });
    </script>
</body>
</html>
