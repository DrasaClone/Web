# .github/workflows/build-pwa-apk.yml
name: Build PWA APK via Bubblewrap Action

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: '17'

      - name: Build APK via Bubblewrap Action
        uses: GoogleChromeLabs/bubblewrap-action@v1
        with:
          manifest: https://drasaclone.github.io/Web/manifest.json
          packageId: com.drasaclone.web
          appVersion: 1.0.0
          appVersionCode: 1

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          name: drasaclone-pwa-apk
          path: android/app/build/outputs/apk/debug/app-debug.apk

# Note:
# - This uses the Bubblewrap GitHub Action to init and build a Trusted Web Activity APK.
# - Ensure manifest.json on your site has valid "purpose": "maskable" for icons.
# - Artifact 'drasaclone-pwa-apk' is a universal, debug-signed APK ready to install.
