# .github/workflows/build-pwa-apk.yml
name: Build PWA APK via PWABuilder

on:
  workflow_dispatch:

jobs:
  build_apk:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Build APK with PWABuilder Action
        uses: pwa-builder/pwabuilder-action@v1
        with:
          url: https://drasaclone.github.io/Web/

      - name: Download APK artifact
        run: |
          # The PWABuilder action uploads artifacts named *.apk.zip
          mkdir -p output
          for file in $(ls *.apk.zip); do
            unzip "$file" -d output
          done

      - name: Upload final APK
        uses: actions/upload-artifact@v4
        with:
          name: drasaclone-pwa-apk
          path: output/*.apk

# Note:
# - This workflow uses PWABuilder's GitHub Action to build the APK from your PWA URL.
# - Simply run this workflow, then download the 'drasaclone-pwa-apk' artifact (APK file) to install.
